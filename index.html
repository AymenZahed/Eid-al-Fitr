<!DOCTYPE html>
<html lang="ar" dir="rtl">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
    <title>تهنئة بعيد الفطر المبارك</title>
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <!-- Tajawal Arabic Font -->
    <link href="https://fonts.googleapis.com/css2?family=Tajawal:wght@400;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Tajawal', sans-serif;
            background: linear-gradient(135deg, #0a1a2e 0%, #1a3a5a 100%);
            animation: sky-pulse 15s infinite alternate;
            touch-action: manipulation;
        }

        @keyframes sky-pulse {
            0% {
                background: linear-gradient(135deg, #0a1a2e 0%, #1a3a5a 100%);
            }

            50% {
                background: linear-gradient(135deg, #0c1445 0%, #2a1a4a 100%);
            }

            100% {
                background: linear-gradient(135deg, #1a0c3e 0%, #3b2161 100%);
            }
        }

        .eid-card {
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.2);
            animation: float 6s ease-in-out infinite;
        }

        @keyframes float {

            0%,
            100% {
                transform: translateY(0);
            }

            50% {
                transform: translateY(-10px);
            }
        }

        .moon {
            width: 120px;
            height: 120px;
            background: transparent;
            border-radius: 50%;
            box-shadow: 20px 20px 0 #FFD700;
            transform: rotate(-45deg);
            filter: drop-shadow(0 0 15px rgba(255, 215, 0, 0.7));
            animation: glow 4s infinite alternate;
        }

        @keyframes glow {

            0%,
            100% {
                box-shadow: 20px 20px 0 #FFD700;
            }

            50% {
                box-shadow: 20px 20px 0 #fff5c4;
            }
        }

        .lantern {
            width: 70px;
            height: 90px;
            border-radius: 5px;
            position: relative;
            animation: swing 4s infinite ease-in-out;
        }

        .lantern::before {
            content: '';
            position: absolute;
            top: -10px;
            right: 25px;
            width: 20px;
            height: 10px;
            background: #f1c40f;
            border-radius: 5px 5px 0 0;
        }

        .lantern::after {
            content: '✿';
            position: absolute;
            bottom: -15px;
            right: 30px;
            color: #f1c40f;
            font-size: 1.5rem;
            text-shadow: 0 0 5px rgba(241, 196, 15, 0.7);
        }

        @keyframes swing {

            0%,
            100% {
                transform: rotate(-5deg);
            }

            50% {
                transform: rotate(5deg);
            }
        }

        .btn-gold {
            background: linear-gradient(45deg, #FFD700, #ffecb3);
            color: #1a3a5a;
            box-shadow: 0 5px 15px rgba(255, 215, 0, 0.4);
            position: relative;
            overflow: hidden;
            -webkit-tap-highlight-color: transparent;
        }

        .btn-gold:hover,
        .btn-gold:active {
            transform: translateY(-3px);
            box-shadow: 0 8px 20px rgba(255, 215, 0, 0.6);
        }

        .btn-gold::before {
            content: '';
            position: absolute;
            top: 0;
            right: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.3), transparent);
            transition: 0.5s;
            z-index: -1;
        }

        .btn-gold:hover::before {
            right: 100%;
        }

        @keyframes text-glow {
            0% {
                text-shadow: 0 0 15px rgba(255, 215, 0, 0.5);
            }

            100% {
                text-shadow: 0 0 25px rgba(255, 215, 0, 0.8);
            }
        }

        /* Share Modal Styles */
        #shareModal {
            -webkit-overflow-scrolling: touch;
            overscroll-behavior: contain;
        }

        #shareModal>div {
            max-height: 90vh;
            overflow-y: auto;
            margin: 1rem;
        }

        .share-btn {
            transition: transform 0.1s, box-shadow 0.1s;
            -webkit-tap-highlight-color: transparent;
        }

        .share-btn:active {
            transform: scale(0.95);
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.2) !important;
        }

        @media (max-width: 768px) {
            .moon {
                width: 60px;
                height: 60px;
                box-shadow: 10px 10px 0 #FFD700;
            }

            .lantern {
                width: 45px;
                height: 65px;
            }

            .lantern::before {
                right: 12px;
                width: 12px;
            }

            .lantern::after {
                right: 14px;
                font-size: 1rem;
            }

            #shareModal>div {
                max-width: 95vw;
            }
        }

        @media (max-height: 600px) {
            #shareModal>div {
                max-height: 80vh;
            }
        }
    </style>
</head>

<body class="flex justify-center items-center p-3 min-h-screen">
    <div class="eid-card rounded-2xl p-8 md:p-10 shadow-xl relative overflow-hidden w-full max-w-2xl">
        <!-- Moons -->
        <div class="absolute top-0 right-0 w-full" style="height: 300px; margin-top: -100px;">
            <div class="moon absolute" style="top: 50px; right: 20%;"></div>
            <div class="moon absolute"
                style="top: 150px; right: 50%; transform: rotate(-45deg) scale(0.8); animation-delay: 0.5s;"></div>
            <div class="moon absolute"
                style="top: 30px; right: 70%; transform: rotate(-45deg) scale(0.6); animation-delay: 1s;"></div>
            <div class="absolute w-48 h-48 rounded-full bg-gradient-to-b from-yellow-100/10 to-yellow-100/0"
                style="top: 50px; right: 20%;"></div>
            <div class="absolute w-48 h-48 rounded-full bg-gradient-to-b from-yellow-100/10 to-yellow-100/0"
                style="top: 150px; right: 50%;"></div>
            <div class="absolute w-48 h-48 rounded-full bg-gradient-to-b from-yellow-100/10 to-yellow-100/0"
                style="top: 30px; right: 70%;"></div>
        </div>

        <!-- Content -->
        <div class="relative text-center">
            <h1 class="text-yellow-400 mb-6 font-bold text-4xl md:text-5xl text-shadow-lg animate-pulse">عيد فطر مبارك
            </h1>
            <div class="text-white mb-8 font-bold text-3xl md:text-4xl">كل عام وأنتم بخير</div>

            <!-- Lanterns -->
            <div class="flex justify-around my-8">
                <div class="lantern bg-gradient-to-b from-red-500 to-red-700"></div>
                <div class="lantern bg-gradient-to-b from-blue-500 to-blue-700" style="animation-delay: 0.5s;"></div>
                <div class="lantern bg-gradient-to-b from-green-500 to-green-700" style="animation-delay: 1s;"></div>
            </div>

            <p class="text-white mb-8 text-lg md:text-xl leading-loose">
                أهنئكم بمناسبة عيد الفطر المبارك، أعاده الله علينا وعليكم بالمن والبركات. تقبل الله منا ومنكم صالح
                الأعمال، وجعل هذا العيد فرصة لتجديد الروابط وتقوية أواصر المحبة بيننا. كل عام وأنتم وأسركم بخير، وكل عام
                وأنتم
                إلى الله أقرب.
            </p>

            <button id="shareBtn" class="btn-gold px-8 py-4 rounded-full font-bold text-lg md:text-xl">مشاركة
                التهنئة</button>

            <div class="text-white/60 mt-8">
                <p>بأطيب الأمنيات في هذه المناسبة السعيدة</p>
            </div>
        </div>
    </div>

    <!-- Share Modal -->
    <div id="shareModal" class="fixed inset-0 bg-black/70 flex items-center justify-center z-50 hidden">
        <div class="bg-white/90 backdrop-blur-sm rounded-xl p-6 max-w-md w-full shadow-2xl">
            <div class="flex justify-between items-center mb-6">
                <h3 class="text-xl font-bold text-gray-800">اختر طريقة المشاركة</h3>
                <button id="closeModal" class="text-gray-600 hover:text-gray-800 text-2xl">&times;</button>
            </div>
            <div class="grid grid-cols-3 gap-4">
                <button onclick="shareVia('whatsapp')"
                    class="share-btn flex flex-col items-center p-4 bg-white rounded-lg shadow hover:shadow-md transition">
                    <i class="fab fa-whatsapp text-green-500 text-3xl mb-2"></i>
                    <span class="text-gray-700">واتساب</span>
                </button>
                <button onclick="shareVia('messenger')"
                    class="share-btn flex flex-col items-center p-4 bg-white rounded-lg shadow hover:shadow-md transition">
                    <i class="fab fa-facebook-messenger text-blue-500 text-3xl mb-2"></i>
                    <span class="text-gray-700">مسنجر</span>
                </button>
                <button onclick="shareVia('twitter')"
                    class="share-btn flex flex-col items-center p-4 bg-white rounded-lg shadow hover:shadow-md transition">
                    <i class="fab fa-twitter text-blue-400 text-3xl mb-2"></i>
                    <span class="text-gray-700">تويتر</span>
                </button>
                <button onclick="shareVia('telegram')"
                    class="share-btn flex flex-col items-center p-4 bg-white rounded-lg shadow hover:shadow-md transition">
                    <i class="fab fa-telegram text-blue-500 text-3xl mb-2"></i>
                    <span class="text-gray-700">تلغرام</span>
                </button>
                <button onclick="shareVia('sms')"
                    class="share-btn flex flex-col items-center p-4 bg-white rounded-lg shadow hover:shadow-md transition">
                    <i class="fas fa-sms text-blue-400 text-3xl mb-2"></i>
                    <span class="text-gray-700">رسالة</span>
                </button>
                <button onclick="shareVia('system')"
                    class="share-btn flex flex-col items-center p-4 bg-white rounded-lg shadow hover:shadow-md transition">
                    <i class="fas fa-share-alt text-gray-600 text-3xl mb-2"></i>
                    <span class="text-gray-700">نسخ</span>
                </button>
            </div>
        </div>
    </div>

    <script>
        // Error handling
        window.addEventListener('error', function (e) {
            console.error('Error:', e.message, 'in', e.filename, 'line:', e.lineno);
        });

        // Modal functionality
        document.addEventListener('DOMContentLoaded', function () {
            const shareModal = document.getElementById('shareModal');
            const shareBtn = document.getElementById('shareBtn');
            const closeModal = document.getElementById('closeModal');

            // Enhanced click handler for mobile
            function showModal() {
                shareModal.classList.remove('hidden');
                document.body.style.overflow = 'hidden';
            }

            function hideModal() {
                shareModal.classList.add('hidden');
                document.body.style.overflow = '';
            }

            // Multiple event types for better mobile support
            shareBtn.addEventListener('click', showModal);
            shareBtn.addEventListener('touchend', showModal);

            closeModal.addEventListener('click', hideModal);
            closeModal.addEventListener('touchend', hideModal);

            // Outside click
            shareModal.addEventListener('click', function (e) {
                if (e.target === shareModal) {
                    hideModal();
                }
            });

            // Touch support for share buttons
            document.querySelectorAll('[onclick^="shareVia"]').forEach(btn => {
                btn.addEventListener('touchend', function (e) {
                    e.preventDefault();
                    const method = this.getAttribute('onclick').match(/'([^']+)'/)[1];
                    shareVia(method);
                });
            });
        });

        // Share function
        function shareVia(method) {
            const url = window.location.href;
            const text = "تهنئة بعيد الفطر المبارك - كل عام وأنتم بخير!";

            try {
                switch (method) {
                    case 'whatsapp':
                        window.open(`https://wa.me/?text=${encodeURIComponent(text + '\n' + url)}`, '_blank');
                        break;
                    case 'messenger':
                        window.open(`fb-messenger://share/?link=${encodeURIComponent(url)}`, '_blank');
                        break;
                    case 'twitter':
                        window.open(`https://twitter.com/intent/tweet?text=${encodeURIComponent(text)}&url=${encodeURIComponent(url)}`, '_blank');
                        break;
                    case 'telegram':
                        window.open(`https://t.me/share/url?url=${encodeURIComponent(url)}&text=${encodeURIComponent(text)}`, '_blank');
                        break;
                    case 'sms':
                        window.open(`sms:?body=${encodeURIComponent(text + '\n' + url)}`, '_blank');
                        break;
                    case 'system':
                        if (navigator.share) {
                            navigator.share({
                                title: 'تهنئة عيد الفطر',
                                text: text,
                                url: url
                            }).catch(err => console.log('Share cancelled:', err));
                        } else {
                            const textarea = document.createElement('textarea');
                            textarea.value = `${text}\n${url}`;
                            document.body.appendChild(textarea);
                            textarea.select();
                            document.execCommand('copy');
                            document.body.removeChild(textarea);
                            alert('تم نسخ الرابط!');
                        }
                        break;
                }
            } catch (e) {
                console.error('Sharing failed:', e);
                alert('حدث خطأ أثناء المشاركة. يرجى المحاولة مرة أخرى.');
            }

            document.getElementById('shareModal').classList.add('hidden');
            document.body.style.overflow = '';
        }

        // Create stars
        const starsContainer = document.createElement('div');
        starsContainer.className = 'fixed inset-0 pointer-events-none';
        document.body.appendChild(starsContainer);

        for (let i = 0; i < 150; i++) {
            const star = document.createElement('div');
            star.className = 'absolute bg-white rounded-full';
            star.style.width = `${Math.random() * 3 + 1}px`;
            star.style.height = star.style.width;
            star.style.right = `${Math.random() * 100}%`;
            star.style.top = `${Math.random() * 100}%`;
            star.style.opacity = Math.random() * 0.8 + 0.2;
            star.style.animation = `twinkle ${Math.random() * 2 + 1}s infinite alternate`;
            star.style.animationDelay = `${Math.random() * 3}s`;
            starsContainer.appendChild(star);
        }

        // Add twinkle animation
        document.head.insertAdjacentHTML('beforeend', `
            <style>
                @keyframes twinkle {
                    0% { opacity: 0.2; transform: scale(0.8); }
                    100% { opacity: 1; transform: scale(1.2); }
                }
            </style>
        `);
    </script>
</body>

</html>
